new_variable_name,definition,type,notes
has_afib_at_admission,"during_afib %in% 1 & during_afib_date==admission_date","Binary",
existing_afib,"medhist_afib %in% 1 | has_afib_at_admission %in% 1 | presenting_ekg_rhythm %in% 'Atrial fibrillation'","Binary",
existing_flutter,"medhist_flutter %in% 1 | presenting_ekg_rhythm %in% 'Atrial flutter'","Binary",
,,,
has_dvt_at_admission,"during_dvt %in% 1 & during_dvt_date==admission_date","Binary",
existing_dvt,"medhist_dvt %in% 1 | has_dvt_at_admission %in% 1","Binary",
,,,
has_pe_at_admission,"during_pe %in% 1 & during_pe_date==admission_date","Binary",
existing_pe,"medhist_pe %in% 1 | has_pe_at_admission","Binary",
,,,
existing_anticoag,"prior_anticoag %in% 1","Binary",
meets_exclusion_criteria,"existing_afib|existing_flutter|existing_dvt|existing_pe|existing_anticoag","Binary","Vector of true/false to identify excluded subjects"
,,,
lowdose_anticoag_dvt,"during_anticoag_dvt_type %in% c('Low Dose DOAC', 'Low Dose Enoxaperin')", "Binary",
fulldose_anticoag_dvt,"during_anticoag_dvt_type %in% c('Full Dose DOAC', 'Full Dose Enoxaperin')", "Binary",
any_lowdose_anticoag,"during_subq_lmwh_low %in% 1 | lowdose_anticoag_dvt %in% 1","Binary",
any_intdose_anticoag,"during_subq_lmwh_intermediate %in% 1","Binary",
any_fulldose_anticoag,"during_subq_lmwh_full %in% 1 | during_subq_uh %in% 1 | during_subq_paruh %in% 1 | fulldose_anticoag_dvt %in% 1","Binary",
,,,
patient_entered_icu_date2,"ifelse(is.na(patient_entered_icu_date), as_date('9999-12-31'), patient_entered_icu_date)","Date",
,,,
lowdose_date1_beforeicu,"ifelse(lowdose_anticoag_dvt %in% 1 & during_anticoag_dvt_date<patient_entered_icu_date2, during_anticoag_dvt_date, NA)","Binary",
lowdose_date2_beforeicu,"ifelse(during_subq_lmwh_low_date < patient_entered_icu_date2, during_subq_lmwh_low_date, NA)","Binary",
latest_lowdose_date_beforeicu,"max(lowdose_date1_beforeicu, lowdose_date2_beforeicu, na.rm = TRUE)","Date",
latest_lowdose_date_beforeicu2,"ifelse(latest_lowdose_date_beforeicu == -Inf, NA, latest_lowdose_date_beforeicu)","Date",

,,,
latest_intdose_date_beforeicu2,"ifelse(during_subq_lmwh_intermediate_date < patient_entered_icu_date2, during_subq_lmwh_intermediate_date, NA)","Date",
,,,
fulldose_date1_beforeicu,"ifelse(during_subq_lmwh_full %in% 1 & during_subq_lmwh_full_date < patient_entered_icu_date2, during_subq_lmwh_full_date, NA)","Date",
fulldose_date2_beforeicu,"ifelse(during_subq_uh %in% 1 & during_subq_uh_date < patient_entered_icu_date2, during_subq_uh_date, NA)","Date",
fulldose_date3_beforeicu,"ifelse(during_subq_paruh %in% 1 & during_subq_paruh_date < patient_entered_icu_date2, during_subq_paruh_date, NA)","Date",
fulldose_date4_beforeicu,"ifelse(fulldose_anticoag_dvt %in% 1 & during_anticoag_dvt_date < patient_entered_icu_date2, during_anticoag_dvt_date, NA)","Date",
latest_fulldose_date_beforeicu,"max(fulldose_date1_beforeicu, fulldose_date2_beforeicu, fulldose_date3_beforeicu, fulldose_date4_beforeicu, na.rm = TRUE)","Date",
latest_fulldose_date_beforeicu2,"ifelse(latest_fulldose_date_beforeicu == -Inf, NA, latest_fulldose_date_beforeicu)","Date",
,,,
highest_dose_beforeicu,"as.character(substitute(None))","Categorical",
highest_dose_beforeicu,"ifelse(!is.na(latest_lowdose_date_beforeicu2), 'Low', highest_dose_beforeicu)","Categorical",
highest_dose_beforeicu,"ifelse(!is.na(latest_intdose_date_beforeicu2), 'Intermediate', highest_dose_beforeicu)","Categorical",
highest_dose_beforeicu,"ifelse(!is.na(latest_fulldose_date_beforeicu2), 'Full', highest_dose_beforeicu)","Categorical",

