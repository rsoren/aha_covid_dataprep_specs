new_variable_name,definition,type,rowwise,notes
has_afib_at_admission,"during_afib %in% 1 & during_afib_date==admission_date","Binary",0,
existing_afib,"medhist_afib %in% 1 | has_afib_at_admission %in% 1 | presenting_ekg_rhythm %in% 'Atrial fibrillation'","Binary",0,
existing_flutter,"medhist_flutter %in% 1 | presenting_ekg_rhythm %in% 'Atrial flutter'","Binary",0,
,,,,
has_dvt_at_admission,"during_dvt %in% 1 & during_dvt_date==admission_date","Binary",0,
existing_dvt,"medhist_dvt %in% 1 | has_dvt_at_admission %in% 1","Binary",0,
,,,,
has_pe_at_admission,"during_pe %in% 1 & during_pe_date==admission_date","Binary",0,
existing_pe,"medhist_pe %in% 1 | has_pe_at_admission","Binary",0,
,,,,
existing_anticoag,"prior_anticoag %in% 1","Binary",0,
,,,,
ami_at_adm,"during_ami_any %in% 1 & during_ami_date==admission_date","Binary",0,
bleeding_at_adm,"clinical_bleeding_transfusion %in% 1 & clinical_bleeding_transfusion_date==admission_date","Binary",0,
ischemic_stroke_at_adm,"ischemic_stroke_ichemorrhage %in% 1 & ischemic_stroke_ichemorrhage_date==admission_date","Binary",0,
,,,,
meets_exclusion_criteria,"ami_at_adm|bleeding_at_adm|ischemic_stroke_at_adm|existing_afib|existing_flutter|existing_dvt|existing_pe|existing_anticoag","Binary",0,"Vector of true/false to identify excluded subjects"
,,,,
hispanic_race,"race == 'Hispanic'","Binary",0,
nonhispanic_white_race,"race == 'Non-Hispanic White'","Binary",0,
nonhispanic_black_race,"race == 'Non-Hispanic Black'","Binary",0,
,,,,
on_aspirin_p2y12_before_adm,"on_aspirin_before_adm==1 | on_p2y12_before_adm==1","Binary",0,
days_symptoms_to_admission,"as.numeric(as_date(admission_date) - as_date(symptom_start_date))","Continuous",0,
days_diagnosis_to_admission,"as.numeric(as_date(admission_date) - as_date(diagnosis_date))","Continuous",0,
,,,,
wbc_mcl,"ifelse(admission_wbc_units == 'mcL', admission_wbc, NA)","Continuous",0,
wbc_mcl,"ifelse(admission_wbc_units == 'K/uL', admission_wbc * 1000, wbc_mcl)","Continuous",0,"One K/uL is one-thousand mcL"
serum_creatinine_mgdl,"ifelse(admission_serum_creatinine_units == 'mg/dL', admission_serum_creatinine, NA)","Continuous",0,
serum_creatinine_mgdl,"ifelse(admission_serum_creatinine_units == 'micromole/L', admission_serum_creatinine * 0.0113, serum_creatinine_mgdl)","Continuous",0,"Regarding SCr: To convert μmol/l to mg/dl multiply by 0.0113"
troponin_ngml,"ifelse(admission_troponin_units == 'ng/mL', admission_troponin, NA)","Continuous",0,
troponin_ngml,"ifelse(admission_troponin_units == 'ug/L', admission_troponin, troponin_ngml)","Continuous",0,"No conversion needed; they are equivalent"
troponin_ngml,"ifelse(admission_troponin_units == 'ng/L', admission_troponin * 0.001, troponin_ngml)","Continuous",0,"One ng/L is 0.001 ng/mL"
ntprobnp_pgml,"ifelse(admission_ntprobnp_units == 'pg/mL', admission_ntprobnp, NA)","Continuous",0,
ntprobnp_pgml,"ifelse(admission_ntprobnp_units == 'ng/L', admission_ntprobnp, ntprobnp_pgml)","Continuous",0,"No conversion needed; they are equivalent"
bnp_pgml,"ifelse(admission_troponin_units == 'ng/mL', admission_bnp, NA)","Continuous",0,
bnp_pgml,"ifelse(admission_troponin_units == 'pmol/L', admission_bnp / 0.289, bnp_pgml)","Continuous",0,"'The conversion factor for BNP is 1 pg/mL = 0.289 pmol/L'"
bnp_pgml,"ifelse(admission_troponin_units == 'ng/L', admission_bnp, bnp_pgml)","Continuous",0,"No conversion needed; they are equivalent"
ddimer_ngml,"ifelse(admission_ddimer_units == 'ng/mL', admission_ddimer, NA)","Continuous",0,
ddimer_ngml,"ifelse(admission_ddimer_units == 'micrograms/mL', admission_ddimer * 0.001, ddimer_ngml)","Continuous",0,"One microgram/mL is 0.001 ng/mL"
ddimer_ngml,"ifelse(admission_ddimer_units == 'ug/mL', admission_ddimer * 0.001, ddimer_ngml)","Continuous",0,"One ug/mL is 0.001 ng/mL"
crp_mgl,"ifelse(admission_crp_units == 'mg/L', admission_crp, NA)","Continuous",0,
crp_mgl,"ifelse(admission_crp_units == 'ng/L', admission_crp * 0.000001, crp_mgl)","Continuous",0,"One ng/L is 0.000001 mg/L"
crp_mgl,"ifelse(admission_crp_units == 'mg/dL', admission_crp * 10, crp_mgl)","Continuous",0,"One mg/dL is 10 mg/L"
procalcitonin_ngml,"ifelse(admission_procalcitonin_units == 'ng/mL', admission_procalcitonin, NA)","Continuous",0,
procalcitonin_ngml,"ifelse(admission_procalcitonin_units == 'micrograms/L', admission_procalcitonin, procalcitonin_ngml)","Continuous",0,"No conversion needed; they are equivalent"
,,,,
lowdose_anticoag_dvt,"during_anticoag_dvt_type %in% c('Low Dose DOAC', 'Low Dose Enoxaperin')", "Binary",0,
fulldose_anticoag_dvt,"during_anticoag_dvt_type %in% c('Full Dose DOAC', 'Full Dose Enoxaperin')", "Binary",0,
any_lowdose_anticoag,"during_subq_lmwh_low %in% 1 | lowdose_anticoag_dvt %in% 1","Binary",0,
any_intdose_anticoag,"during_subq_lmwh_intermediate %in% 1","Binary",0,
any_fulldose_anticoag,"during_subq_lmwh_full %in% 1 | during_subq_uh %in% 1 | during_subq_paruh %in% 1 | fulldose_anticoag_dvt %in% 1","Binary",0,
,,,,
patient_entered_icu_date2,"ifelse(is.na(patient_entered_icu_date), as_date('9999-12-31'), patient_entered_icu_date)","Date",0,
,,,,
lowdose_date1_beforeicu,"ifelse(lowdose_anticoag_dvt %in% 1 & during_anticoag_dvt_date<patient_entered_icu_date2, during_anticoag_dvt_date, NA)","Binary",0,
lowdose_date2_beforeicu,"ifelse(during_subq_lmwh_low_date < patient_entered_icu_date2, during_subq_lmwh_low_date, NA)","Binary",0,
latest_lowdose_date_beforeicu,"max(lowdose_date1_beforeicu, lowdose_date2_beforeicu, na.rm = TRUE)","Date",1,
latest_lowdose_date_beforeicu2,"ifelse(latest_lowdose_date_beforeicu == -Inf, NA, latest_lowdose_date_beforeicu)","Date",0,
,,,,
latest_intdose_date_beforeicu2,"ifelse(during_subq_lmwh_intermediate_date < patient_entered_icu_date2, during_subq_lmwh_intermediate_date, NA)","Date",0,
,,,,
fulldose_date1_beforeicu,"ifelse(during_subq_lmwh_full %in% 1 & during_subq_lmwh_full_date < patient_entered_icu_date2, during_subq_lmwh_full_date, NA)","Date",0,
fulldose_date2_beforeicu,"ifelse(during_subq_uh %in% 1 & during_subq_uh_date < patient_entered_icu_date2, during_subq_uh_date, NA)","Date",0,
fulldose_date3_beforeicu,"ifelse(during_subq_paruh %in% 1 & during_subq_paruh_date < patient_entered_icu_date2, during_subq_paruh_date, NA)","Date",0,
fulldose_date4_beforeicu,"ifelse(fulldose_anticoag_dvt %in% 1 & during_anticoag_dvt_date < patient_entered_icu_date2, during_anticoag_dvt_date, NA)","Date",0,
latest_fulldose_date_beforeicu,"max(fulldose_date1_beforeicu, fulldose_date2_beforeicu, fulldose_date3_beforeicu, fulldose_date4_beforeicu, na.rm = TRUE)","Date",1,
latest_fulldose_date_beforeicu2,"ifelse(latest_fulldose_date_beforeicu == -Inf, NA, latest_fulldose_date_beforeicu)","Date",0,
,,,,
highest_dose_beforeicu,"as.character(substitute(None))","Categorical",0,
highest_dose_beforeicu,"ifelse(!is.na(latest_lowdose_date_beforeicu2), 'Low', highest_dose_beforeicu)","Categorical",0,
highest_dose_beforeicu,"ifelse(!is.na(latest_intdose_date_beforeicu2), 'Intermediate', highest_dose_beforeicu)","Categorical",0,
highest_dose_beforeicu,"ifelse(!is.na(latest_fulldose_date_beforeicu2), 'Full', highest_dose_beforeicu)","Categorical",0,
,,,,
highest_dose_general,"as.character(substitute(None))","Categorical",0,
highest_dose_general,"ifelse(any_lowdose_anticoag %in% 1, 'Low', highest_dose_general)","Categorical",0,
highest_dose_general,"ifelse(any_intdose_anticoag %in% 1, 'Intermediate', highest_dose_general)","Categorical",0,
highest_dose_general,"ifelse(any_fulldose_anticoag %in% 1, 'Full', highest_dose_general)","Categorical",0,
,,,,
had_healthevent_during,"during_afib %in% 1 | during_ami_any %in% 1 | during_dvt %in% 1 | during_pe %in% 1 | clinical_bleeding_transfusion %in% 1 | ischemic_stroke_ichemorrhage %in% 1","Binary",0,
earliest_healthevent_date,"min(during_afib_date, during_ami_date, during_dvt_date, during_pe_date, clinical_bleeding_transfusion_date, ischemic_stroke_ichemorrhage_date, na.rm = TRUE)","Date",1,
,,,,
earliest_healthevent_date2,"ifelse(is.na(earliest_healthevent_date), as_date('9999-12-31'), earliest_healthevent_date)","Date",0,
,,,,
lowdose_date1_beforehe,"ifelse(lowdose_anticoag_dvt %in% 1 & during_anticoag_dvt_date<earliest_healthevent_date2, during_anticoag_dvt_date, NA)","Binary",0,
lowdose_date2_beforehe,"ifelse(during_subq_lmwh_low_date < earliest_healthevent_date2, during_subq_lmwh_low_date, NA)","Binary",0,
earliest_lowdose_date_beforehe,”min(lowdose_date1_beforehe, lowdose_date2_beforehe, na.rm = TRUE)","Date",1,
